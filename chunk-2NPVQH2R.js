import{N as k,O as X,P as S,Q as q,R as F,l as H,m as T,n as P,p as U,q as z,r as B}from"./chunk-VVXHZA7K.js";import{Ga as I,Gb as Y,Ja as f,La as x,Oa as p,Pa as l,Ta as L,Za as g,a as D,ga as w,ia as j,ib as t,jb as o,kb as s,qb as u,ub as E,xb as d,yb as y,zb as O}from"./chunk-W3XV2ATP.js";var N=(()=>{let n=class n{constructor(a,r,e,m){this.authService=a,this.element=r,this.renderer=e,this.tokenService=m,this.userOne=X.users.userOne,this.isOpen=!1,this.user=null,this.onClickProfile=()=>{this.isOpen=!this.isOpen;let c=this.element.nativeElement.querySelector(".profile-dropdown-list");this.renderer.setAttribute(c,"aria-expanded",this.isOpen.toString())}}ngOnInit(){this.Id=this.authService.getAuthenticatedUserId(),console.log("ID de l'utilisateur authentifi\xE9:",this.Id),this.Id!==0?this.retrieveUserById():console.error("ID d'utilisateur invalide:",this.Id)}retrieveUserById(){this.authService.getUserById(this.Id).subscribe({next:a=>{this.user=a},error:a=>console.error("Erreur lors de la r\xE9cup\xE9ration de l'utilisateur:",a)})}onLogout(){this.tokenService.logOut()}};n.\u0275fac=function(r){return new(r||n)(l(k),l(f),l(x),l(S))},n.\u0275cmp=w({type:n,selectors:[["app-header"]],decls:41,vars:6,consts:[[1,"backdrop-blur-sm","bg-white/40","py-3","px-8","shadow-[0_5px_5px_-5px]","shadow-emerald-100","sticky","top-0","admin-navbar"],[1,"flex","justify-between","items-center"],[1,"flex","justify-start","items-center","gap-x-3"],[1,"flex","justify-end","items-center","gap-x-3"],[1,"relative","inline-block"],[1,"relative","inline-block","profile-dropdown"],[1,"flex","items-center",3,"click"],["type","button",1,"flex","w-10","h-10","overflow-hidden","rounded-full","border-2","border-emerald-500","shadow"],["alt","user logo url",1,"w-full","object-cover",3,"src"],[1,"text-left","ml-3"],[1,"text-light","text-xs"],["aria-expanded","false",1,"profile-dropdown-list"],[1,"flex","gap-3","items-center"],[1,"flex","items-center","justify-center","rounded-full","h-12","w-12","overflow-hidden","border-2","border-emerald-600"],["alt","Profile",1,"w-full","object-cover",3,"src"],[1,"flex","gap-1","text-sm","font-semibold"],[1,"text-emerald-600"],[1,"bi","bi-check2-circle"],[1,"text-xs","text-slate-400"],[1,"border-t","border-slate-500/30"],[1,"flex","flex-col","text-sm"],["href","/marchand/settings/profile",1,"flex","items-center","gap-3","rounded-md","p-2","hover:bg-slate-200"],[1,"bi","bi-person-circle"],["href","/marchand/support/contact",1,"flex","items-center","gap-3","rounded-md","p-2","hover:bg-slate-200"],[1,"bi","bi-info-circle"],[1,""],["type","button",1,"w-full","p-2","text-left","text-sm","text-red-500","font-semibold","rounded","transition","hover:bg-slate-200",3,"click"],[1,"bi","bi-power"]],template:function(r,e){r&1&&(t(0,"header",0)(1,"div",1),s(2,"div",2),t(3,"div",3),s(4,"div",4),t(5,"div",5)(6,"div",6),u("click",function(){return e.onClickProfile()}),t(7,"div",7),s(8,"img",8),o(),t(9,"div",9)(10,"p"),d(11),o(),t(12,"p",10),d(13),o()()(),t(14,"div",11)(15,"div",12)(16,"div",13),s(17,"img",14),o(),t(18,"div")(19,"div",15)(20,"span"),d(21),o(),t(22,"span",16),s(23,"i",17),o()(),t(24,"div",18),d(25),o()()(),s(26,"div",19),t(27,"div",20)(28,"a",21),s(29,"i",22),t(30,"span"),d(31,"Profile"),o()(),t(32,"a",23),s(33,"i",24),t(34,"span"),d(35,"Help Center"),o()()(),s(36,"div",19),t(37,"div",25)(38,"button",26),u("click",function(){return e.onLogout()}),s(39,"i",27),d(40," Logout "),o()()()()()()()),r&2&&(p(8),E("src",e.user==null?null:e.user.profilLogoUrl,I),p(3),O("",e.user==null?null:e.user.username," "),p(2),y((e.user==null||e.user.roles==null?null:e.user.roles.length)>=2?'Administrateur: "Marchand"':"Marchand"),p(4),E("src",e.user==null?null:e.user.profilLogoUrl,I),p(4),y(e.user==null?null:e.user.username),p(4),y(e.user==null?null:e.user.email))},styles:[".admin-navbar[_ngcontent-%COMP%]{z-index:10}.profile-dropdown-list[_ngcontent-%COMP%]{position:absolute;top:2.25rem;right:-.75rem;margin-top:.5rem;display:flex;width:15rem;flex-direction:column;gap:.75rem;border-radius:.75rem;border-width:1px;border-color:#64748b4d;--tw-bg-opacity: 1;background-color:rgb(241 245 249 / var(--tw-bg-opacity));padding:1rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.profile-dropdown-list[aria-expanded=false][_ngcontent-%COMP%]{visibility:hidden;--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0}"]});let i=n;return i})();var R=function(i){return i.Dashboard="dashboard/:id",i.More="transaction/:id/:transaId/:clientName",i.Support="support",i.Settings="settings",i.Elements="elements",i}(R||{}),A=function(i){return i.Profile="profile",i.Users="users",i}(A||{}),M=function(i){return i.FAQ="faq",i.Contact="contact",i}(M||{});var Q=(()=>{let n=class n{constructor(a){this.elementRef=a}onClick(){let a=this.elementRef.nativeElement,r=a.closest(".sidebar");r?.getAttribute("aria-expanded")==="false"?a.closest(".sidebar")?.setAttribute("aria-expanded","true"):r?.setAttribute("aria-expanded","false"),r?.querySelectorAll(".sub-menu")?.forEach(c=>{c.getAttribute("aria-expanded")=="true"&&c.setAttribute("aria-expanded","false"),c.toggleAttribute("icon-hidden")})}};n.\u0275fac=function(r){return new(r||n)(l(f))},n.\u0275dir=j({type:n,selectors:[["","sidebarCollapse",""]],hostBindings:function(r,e){r&1&&u("click",function(){return e.onClick()})},standalone:!0});let i=n;return i})();var ee=i=>["dashboard/",i],V=(()=>{let n=class n{constructor(a,r,e,m,c,W){this.commonServices=a,this.elementRef=r,this.tokenService=e,this.authService=m,this.route=c,this.router=W,this.sidebarIsCollapsed=!0,this.appRoutes=q,this.marchandRoutes=R,this.settingRoutes=A,this.supportRoutes=M,this.routerSubscription=new D,this.sidebarCollapsed=new L,this.marchandId=null,this.errorMessage=null,this.subMenuToggleHandler=v=>{let b=v.target.closest("a.sub-menu");b.getAttribute("aria-expanded")==="false"?b.setAttribute("aria-expanded","true"):b.setAttribute("aria-expanded","false")},this.subMenuToggleHandlerOnPageReload=()=>{let v=this.elementRef.nativeElement.querySelector('[aria-current="page"]');if(v){let h=v.closest("ul.sub-menu-item");if(h){let b=h.previousElementSibling;b&&b.setAttribute("aria-expanded","true")}}},this.subMenuToggleHandlerOnRouteChange=()=>{this.routerSubscription=this.router.events.subscribe(v=>{if(v instanceof H){let h=this.elementRef.nativeElement.querySelectorAll(".sub-menu"),b=this.elementRef.nativeElement.querySelector(`[href='${v.url}']`);if(b&&b.closest("ul.sub-menu-item"))return;h.forEach(_=>{_.getAttribute("aria-expanded")==="true"&&_.setAttribute("aria-expanded","false")})}})},this.userId=this.authService.getAuthenticatedUserId(),console.log("User ID:",this.userId)}ngOnInit(){this.route.params.subscribe(a=>{let r=a.id;console.log("Raw ID from params:",r),r?(this.marchandId=+r,console.log("Parsed ID:",this.marchandId)):console.warn("No Marchand ID found in route parameters.")}),this.userId=this.authService.getAuthenticatedUserId(),console.log("ID de l'utilisateur authentifi\xE9:",this.userId),this.userId?this.getMarchandIdByUserId():console.error("Invalid user ID")}getMarchandIdByUserId(){this.userId>0?this.authService.findMarchandIdByUserId(this.userId).subscribe(a=>{console.log("API Response:",a),this.marchandId=a,console.log("Marchand ID:",this.marchandId)},a=>{this.errorMessage="Error fetching Marchand ID",console.error(this.errorMessage,a)}):this.errorMessage="Invalid user ID"}ngAfterViewInit(){this.subMenuToggleHandlerOnRouteChange(),setTimeout(()=>{this.subMenuToggleHandlerOnPageReload()},1)}ngOnDestroy(){this.routerSubscription.unsubscribe()}onLogout(){this.tokenService.logOut()}};n.\u0275fac=function(r){return new(r||n)(l(F),l(f),l(S),l(k),l(T),l(U))},n.\u0275cmp=w({type:n,selectors:[["app-sidebar"]],outputs:{sidebarCollapsed:"sidebarCollapsed"},decls:50,vars:6,consts:[[1,"brand-wrapper"],["href","#",1,"brand","text-center"],[1,"flex","items-center","font-bold","text-emerald-50"],["src","https://i.ibb.co/7K50gbw/Pay-Pikpng.png","alt","Logo",1,"h-16","w-auto","object-contain","hover:border-emerald-400"],[1,"menu-links"],["routerLinkActive","active","ariaCurrentWhenActive","page",1,"menu-item",3,"routerLink"],[1,"bi","bi-columns-gap"],["href","javascript:void(0)","aria-expanded","true",1,"menu-item","sub-menu",3,"click"],[1,"bi","bi-sliders2-vertical"],[1,"sub-menu-item"],["href","#","ariaCurrentWhenActive","page",1,"menu-item"],[1,"bi","bi-headset"],["href","#",1,"menu-item",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"collapsible-btn-container"],["id","sidebar-collapse-btn","sidebarCollapse",""],[1,"w-6","h-16","flex","justify-center","items-center"],[1,"collapsible-icons"],[1,"collapsible-top-icon"],[1,"collapsible-bottom-icon"]],template:function(r,e){r&1&&(t(0,"aside")(1,"div",0)(2,"a",1)(3,"h1",2),s(4,"img",3),o()()(),t(5,"ul",4)(6,"li")(7,"a",5),s(8,"i",6),t(9,"span"),d(10,"Tableau de bord"),o()()(),t(11,"li")(12,"a",7),u("click",function(c){return e.subMenuToggleHandler(c)}),s(13,"i",8),t(14,"span"),d(15,"Param\xE8tres"),o()(),t(16,"ul",9)(17,"li")(18,"a",5)(19,"span"),d(20,"Profil"),o()()(),t(21,"li")(22,"a",10)(23,"span"),d(24,"Site web"),o()()()()(),t(25,"li")(26,"a",7),u("click",function(c){return e.subMenuToggleHandler(c)}),s(27,"i",11),t(28,"span"),d(29,"Support"),o()(),t(30,"ul",9)(31,"li")(32,"a",5)(33,"span"),d(34,"FAQ"),o()()(),t(35,"li")(36,"a",5)(37,"span"),d(38,"Nous contacter"),o()()()()(),t(39,"li")(40,"a",12),u("click",function(){return e.onLogout()}),s(41,"i",13),t(42,"span"),d(43,"Se d\xE9connecter"),o()()()()(),t(44,"div",14)(45,"button",15)(46,"div",16)(47,"div",17),s(48,"div",18)(49,"div",19),o()()()()),r&2&&(p(7),g("routerLink",Y(4,ee,e.marchandId)),p(11),g("routerLink",e.commonServices.prepareRoute(e.appRoutes.Marchand,e.marchandRoutes.Settings,"profile/"+e.marchandId)),p(14),g("routerLink",e.commonServices.prepareRoute(e.appRoutes.Marchand,e.marchandRoutes.Support,e.supportRoutes.FAQ)),p(4),g("routerLink",e.commonServices.prepareRoute(e.appRoutes.Marchand,e.marchandRoutes.Support,e.supportRoutes.Contact)))},dependencies:[z,B,Q],styles:[`.sidebar{position:sticky;top:0;min-height:100vh;background-image:linear-gradient(to right,var(--tw-gradient-stops));--tw-gradient-from: #022c22 var(--tw-gradient-from-position);--tw-gradient-to: rgb(2 44 34 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to: #047857 var(--tw-gradient-to-position);padding-left:.75rem;padding-right:.75rem;padding-top:1.25rem;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.sidebar[aria-expanded=true]{width:15rem}.sidebar[aria-expanded=false]{width:0px;overflow:hidden;padding:0}.brand-wrapper{display:flex;min-height:2rem;align-items:center;justify-content:space-between}.brand{display:flex;align-items:center;column-gap:.5rem;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}app-sidebar[aria-expanded=false] .brand-wrapper{justify-content:space-evenly}app-sidebar[aria-expanded=false] .brand{width:0px;--tw-scale-x: 0;--tw-scale-y: 0;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.menu-links{display:flex;flex-direction:column;row-gap:.75rem;padding-top:1.25rem;font-weight:500}.menu-item{display:inline-flex;width:100%;align-items:center;column-gap:.5rem;overflow:hidden;border-radius:.25rem;padding:.25rem .5rem;--tw-text-opacity: 1;color:rgb(167 243 208 / var(--tw-text-opacity));transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.menu-item span{font-size:.875rem;line-height:1.25rem}.sidebar[aria-expanded=false] .menu-links .menu-item span{display:none}.menu-item.active{--tw-text-opacity: 1;color:rgb(5 150 105 / var(--tw-text-opacity))}.menu-item:hover{--tw-bg-opacity: 1;background-color:rgb(4 120 87 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(236 253 245 / var(--tw-text-opacity))}.menu-item i:before{display:inline}.sub-menu{position:relative}.sub-menu[aria-expanded=true]{--tw-text-opacity: 1;color:rgb(236 253 245 / var(--tw-text-opacity))}.sub-menu:after{font-family:Bootstrap-Icons;content:"\\f282";position:absolute;font-size:.5rem;right:0;padding:.5rem;transition:all .2s ease-in-out}.sub-menu[aria-expanded=true]:after{transform:rotate(90deg)}.sub-menu[icon-hidden]:after{opacity:0}.sub-menu-item{margin-left:1rem;display:flex;max-height:0px;flex-direction:column;overflow:hidden;border-left-width:1px;--tw-border-opacity: 1;border-color:rgb(5 150 105 / var(--tw-border-opacity));padding-left:.5rem;font-size:.875rem;line-height:1.25rem;transition-property:max-height;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.sub-menu[aria-expanded=true]+.sub-menu-item{max-height:24rem!important}.collapsible-top-icon,.collapsible-bottom-icon{transition-property:all;transition-duration:.1s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.collapsible-btn-container{position:fixed;left:0;top:50%;--tw-translate-x: 15rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}@media (max-width: 1200px){.collapsible-btn-container{position:fixed;left:0;top:50%;--tw-translate-x: 10rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}}.collapsible-top-icon{height:1rem;width:.25rem;--tw-translate-y: .15rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(2 44 34 / var(--tw-bg-opacity))}.collapsible-bottom-icon{height:1rem;width:.25rem;--tw-translate-y: -.15rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(2 44 34 / var(--tw-bg-opacity))}#sidebar-collapse-btn:hover .collapsible-top-icon,#sidebar-collapse-btn:hover .collapsible-bottom-icon{--tw-bg-opacity: 1;background-color:rgb(4 120 87 / var(--tw-bg-opacity))}.sidebar[aria-expanded=false] .collapsible-btn-container{--tw-translate-x: .3rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar[aria-expanded=false] .collapsible-btn-container .collapsible-top-icon{--tw-rotate: -15deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar[aria-expanded=false] .collapsible-btn-container .collapsible-bottom-icon,.sidebar[aria-expanded=true] #sidebar-collapse-btn:hover .collapsible-top-icon{--tw-rotate: 15deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar[aria-expanded=true] #sidebar-collapse-btn:hover .collapsible-bottom-icon{--tw-rotate: -15deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}
`],encapsulation:2});let i=n;return i})();var ue=(()=>{let n=class n{constructor(a,r){this.element=a,this.rendered=r,this.title="event-bud-frontend"}onClick(a){if(!this.element.nativeElement.querySelector(".profile-dropdown").contains(a)){let e=this.element.nativeElement.querySelector(".profile-dropdown-list");this.rendered.setAttribute(e,"aria-expanded","false")}}};n.\u0275fac=function(r){return new(r||n)(l(f),l(x))},n.\u0275cmp=w({type:n,selectors:[["app-marchand"]],hostBindings:function(r,e){r&1&&u("click",function(c){return e.onClick(c.target)})},decls:6,vars:0,consts:[[1,"flex","w-full","items-start","font-sans","bg-slate-100"],["aria-expanded","true",1,"sidebar","shadow-xl"],[1,"flex-1"],[1,"min-h-screen","p-8"]],template:function(r,e){r&1&&(t(0,"div",0),s(1,"app-sidebar",1),t(2,"div",2),s(3,"app-header"),t(4,"main",3),s(5,"router-outlet"),o()()())},dependencies:[P,N,V]});let i=n;return i})();export{R as a,A as b,M as c,ue as d};
