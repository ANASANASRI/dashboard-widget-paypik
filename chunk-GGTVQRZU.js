import{N as C,O as $,P as E,Q as G,R as J,l as q,m as F,n as N,p as Q,q as W,r as K}from"./chunk-VVXHZA7K.js";import{Fb as B,Ga as M,Gb as V,Ja as h,La as I,Oa as p,Pa as c,Ta as Y,Za as w,a as H,db as P,ga as g,ia as U,ib as t,jb as o,ka as k,kb as s,la as S,nb as R,qb as m,rb as x,rc as X,ub as A,xb as d,yb as _,zb as z}from"./chunk-W3XV2ATP.js";var Z=(()=>{let n=class n{constructor(i,e,a,f){this.authService=i,this.element=e,this.renderer=a,this.tokenService=f,this.userOne=$.users.userOne,this.isOpen=!1,this.user=null,this.onClickProfile=()=>{this.isOpen=!this.isOpen;let u=this.element.nativeElement.querySelector(".profile-dropdown-list");this.renderer.setAttribute(u,"aria-expanded",this.isOpen.toString())}}ngOnInit(){this.Id=this.authService.getAuthenticatedUserId(),console.log("ID de l'utilisateur authentifi\xE9:",this.Id),this.Id!==0?this.retrieveUserById():console.error("ID d'utilisateur invalide:",this.Id)}retrieveUserById(){this.authService.getUserById(this.Id).subscribe({next:i=>{this.user=i},error:i=>console.error("Erreur lors de la r\xE9cup\xE9ration de l'utilisateur:",i)})}onLogout(){this.tokenService.logOut()}};n.\u0275fac=function(e){return new(e||n)(c(C),c(h),c(I),c(E))},n.\u0275cmp=g({type:n,selectors:[["app-header"]],decls:41,vars:6,consts:[[1,"backdrop-blur-sm","bg-white/40","py-3","px-8","shadow-[0_5px_5px_-5px]","shadow-emerald-100","sticky","top-0","admin-navbar"],[1,"flex","justify-between","items-center"],[1,"flex","justify-start","items-center","gap-x-3"],[1,"flex","justify-end","items-center","gap-x-3"],[1,"relative","inline-block"],[1,"relative","inline-block","profile-dropdown"],[1,"flex","items-center",3,"click"],["type","button",1,"flex","w-10","h-10","overflow-hidden","rounded-full","border-2","border-emerald-500","shadow"],["alt","user logo url",1,"w-full","object-cover",3,"src"],[1,"text-left","ml-3"],[1,"text-light","text-xs"],["aria-expanded","false",1,"profile-dropdown-list"],[1,"flex","gap-3","items-center"],[1,"flex","items-center","justify-center","rounded-full","h-12","w-12","overflow-hidden","border-2","border-emerald-600"],["alt","Profile",1,"w-full","object-cover",3,"src"],[1,"flex","gap-1","text-sm","font-semibold"],[1,"text-emerald-600"],[1,"bi","bi-check2-circle"],[1,"text-xs","text-slate-400"],[1,"border-t","border-slate-500/30"],[1,"flex","flex-col","text-sm"],["href","/marchand/settings/profile",1,"flex","items-center","gap-3","rounded-md","p-2","hover:bg-slate-200"],[1,"bi","bi-person-circle"],["href","/marchand/support/contact",1,"flex","items-center","gap-3","rounded-md","p-2","hover:bg-slate-200"],[1,"bi","bi-info-circle"],[1,""],["type","button",1,"w-full","p-2","text-left","text-sm","text-red-500","font-semibold","rounded","transition","hover:bg-slate-200",3,"click"],[1,"bi","bi-power"]],template:function(e,a){e&1&&(t(0,"header",0)(1,"div",1),s(2,"div",2),t(3,"div",3),s(4,"div",4),t(5,"div",5)(6,"div",6),m("click",function(){return a.onClickProfile()}),t(7,"div",7),s(8,"img",8),o(),t(9,"div",9)(10,"p"),d(11),o(),t(12,"p",10),d(13),o()()(),t(14,"div",11)(15,"div",12)(16,"div",13),s(17,"img",14),o(),t(18,"div")(19,"div",15)(20,"span"),d(21),o(),t(22,"span",16),s(23,"i",17),o()(),t(24,"div",18),d(25),o()()(),s(26,"div",19),t(27,"div",20)(28,"a",21),s(29,"i",22),t(30,"span"),d(31,"Profile"),o()(),t(32,"a",23),s(33,"i",24),t(34,"span"),d(35,"Help Center"),o()()(),s(36,"div",19),t(37,"div",25)(38,"button",26),m("click",function(){return a.onLogout()}),s(39,"i",27),d(40," Logout "),o()()()()()()()),e&2&&(p(8),A("src",a.user==null?null:a.user.profilLogoUrl,M),p(3),z("",a.user==null?null:a.user.username," "),p(2),_((a.user==null||a.user.roles==null?null:a.user.roles.length)>=2?'Administrateur: "Marchand"':"Marchand"),p(4),A("src",a.user==null?null:a.user.profilLogoUrl,M),p(4),_(a.user==null?null:a.user.username),p(4),_(a.user==null?null:a.user.email))},styles:[".admin-navbar[_ngcontent-%COMP%]{z-index:10}.profile-dropdown-list[_ngcontent-%COMP%]{position:absolute;top:2.25rem;right:-.75rem;margin-top:.5rem;display:flex;width:15rem;flex-direction:column;gap:.75rem;border-radius:.75rem;border-width:1px;border-color:#64748b4d;--tw-bg-opacity: 1;background-color:rgb(241 245 249 / var(--tw-bg-opacity));padding:1rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.profile-dropdown-list[aria-expanded=false][_ngcontent-%COMP%]{visibility:hidden;--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0}"]});let r=n;return r})();var j=function(r){return r.Dashboard="dashboard/:id",r.More="transaction/:id/:transaId/:clientName",r.Support="support",r.Settings="settings",r.Elements="elements",r}(j||{}),O=function(r){return r.Profile="profile",r.Users="users",r}(O||{}),T=function(r){return r.FAQ="faq",r.Contact="contact",r}(T||{});var ee=(()=>{let n=class n{constructor(i){this.elementRef=i}onClick(){let i=this.elementRef.nativeElement,e=i.closest(".sidebar");e?.getAttribute("aria-expanded")==="false"?i.closest(".sidebar")?.setAttribute("aria-expanded","true"):e?.setAttribute("aria-expanded","false"),e?.querySelectorAll(".sub-menu")?.forEach(u=>{u.getAttribute("aria-expanded")=="true"&&u.setAttribute("aria-expanded","false"),u.toggleAttribute("icon-hidden")})}};n.\u0275fac=function(e){return new(e||n)(c(h))},n.\u0275dir=U({type:n,selectors:[["","sidebarCollapse",""]],hostBindings:function(e,a){e&1&&m("click",function(){return a.onClick()})},standalone:!0});let r=n;return r})();var le=r=>["dashboard/",r];function de(r,n){if(r&1){let l=R();t(0,"aside")(1,"div",7)(2,"a",8)(3,"h1",9),s(4,"img",10),o()()(),t(5,"ul",11)(6,"li")(7,"a",12),s(8,"i",13),t(9,"span"),d(10,"Tableau de bord"),o()()(),t(11,"li")(12,"a",14),m("click",function(e){k(l);let a=x();return S(a.subMenuToggleHandler(e))}),s(13,"i",15),t(14,"span"),d(15,"Param\xE8tres"),o()(),t(16,"ul",16)(17,"li")(18,"a",12)(19,"span"),d(20,"Mot de passe"),o()()(),t(21,"li")(22,"a",17)(23,"span"),d(24,"Site web"),o()()()()(),t(25,"li")(26,"a",14),m("click",function(e){k(l);let a=x();return S(a.subMenuToggleHandler(e))}),s(27,"i",18),t(28,"span"),d(29,"Support"),o()(),t(30,"ul",16)(31,"li")(32,"a",12)(33,"span"),d(34,"FAQ"),o()()(),t(35,"li")(36,"a",12)(37,"span"),d(38,"Nous contacter"),o()()()()(),t(39,"li")(40,"a",19),m("click",function(){k(l);let e=x();return S(e.onLogout())}),s(41,"i",20),t(42,"span"),d(43,"Se d\xE9connecter"),o()()()()()}if(r&2){let l=x();p(7),w("routerLink",V(4,le,l.marchandId)),p(11),w("routerLink",l.commonServices.prepareRoute(l.appRoutes.Marchand,l.marchandRoutes.Settings,"profile/"+l.marchandId)),p(14),w("routerLink",l.commonServices.prepareRoute(l.appRoutes.Marchand,l.marchandRoutes.Support,l.supportRoutes.FAQ)),p(4),w("routerLink",l.commonServices.prepareRoute(l.appRoutes.Marchand,l.marchandRoutes.Support,l.supportRoutes.Contact))}}var ce=()=>["/admin/dashboard"];function pe(r,n){if(r&1){let l=R();t(0,"aside")(1,"div",7)(2,"a",8)(3,"h1",9),s(4,"img",10),o()()(),t(5,"ul",11)(6,"li")(7,"a",21),m("click",function(){k(l);let e=x();return S(e.reloadPage())}),s(8,"i",13),t(9,"span"),d(10,"Tableau de bord"),o()()(),t(11,"li")(12,"a",12),s(13,"i",22),t(14,"span"),d(15,"Administrateur tableau de bord"),o()()()()()}r&2&&(p(12),w("routerLink",B(1,ce)))}var te=(()=>{let n=class n{constructor(i,e,a,f,u,ie){this.commonServices=i,this.elementRef=e,this.tokenService=a,this.authService=f,this.route=u,this.router=ie,this.sidebarIsCollapsed=!0,this.appRoutes=G,this.marchandRoutes=j,this.settingRoutes=O,this.supportRoutes=T,this.routerSubscription=new H,this.isMarchand=!1,this.sidebarCollapsed=new Y,this.marchandId=null,this.errorMessage=null,this.subMenuToggleHandler=v=>{let b=v.target.closest("a.sub-menu");b.getAttribute("aria-expanded")==="false"?b.setAttribute("aria-expanded","true"):b.setAttribute("aria-expanded","false")},this.subMenuToggleHandlerOnPageReload=()=>{let v=this.elementRef.nativeElement.querySelector('[aria-current="page"]');if(v){let y=v.closest("ul.sub-menu-item");if(y){let b=y.previousElementSibling;b&&b.setAttribute("aria-expanded","true")}}},this.subMenuToggleHandlerOnRouteChange=()=>{this.routerSubscription=this.router.events.subscribe(v=>{if(v instanceof q){let y=this.elementRef.nativeElement.querySelectorAll(".sub-menu"),b=this.elementRef.nativeElement.querySelector(`[href='${v.url}']`);if(b&&b.closest("ul.sub-menu-item"))return;y.forEach(L=>{L.getAttribute("aria-expanded")==="true"&&L.setAttribute("aria-expanded","false")})}})},this.userId=this.authService.getAuthenticatedUserId(),console.log("User ID:",this.userId)}ngOnInit(){this.checkIfUserIsOnlyMarchand(),this.isMarchand?(this.route.params.subscribe(i=>{let e=i.id;console.log("Raw ID from params:",e),e?(this.marchandId=+e,console.log("Parsed ID:",this.marchandId)):console.warn("No Marchand ID found in route parameters.")}),this.userId=this.authService.getAuthenticatedUserId(),console.log("ID de l'utilisateur authentifi\xE9:",this.userId),this.userId?this.getMarchandIdByUserId():console.error("Invalid user ID")):console.log("User is not only a Marchand. Skipping Marchand-specific initialization.")}checkIfUserIsOnlyMarchand(){let i=this.authService.getUserRoles();this.isMarchand=i.length===1&&i[0]==="ROLE_MARCHAND",console.log("isMarchand:",this.isMarchand)}getMarchandIdByUserId(){this.userId>0?this.authService.findMarchandIdByUserId(this.userId).subscribe(i=>{console.log("API Response:",i),this.marchandId=i,console.log("Marchand ID:",this.marchandId)},i=>{this.errorMessage="Error fetching Marchand ID",console.error(this.errorMessage,i)}):this.errorMessage="Invalid user ID"}ngAfterViewInit(){this.subMenuToggleHandlerOnRouteChange(),setTimeout(()=>{this.subMenuToggleHandlerOnPageReload()},1)}ngOnDestroy(){this.routerSubscription.unsubscribe()}reloadPage(){window.location.reload()}onLogout(){this.tokenService.logOut()}};n.\u0275fac=function(e){return new(e||n)(c(J),c(h),c(E),c(C),c(F),c(Q))},n.\u0275cmp=g({type:n,selectors:[["app-sidebar"]],outputs:{sidebarCollapsed:"sidebarCollapsed"},decls:8,vars:2,consts:[[4,"ngIf"],[1,"collapsible-btn-container"],["id","sidebar-collapse-btn","sidebarCollapse",""],[1,"w-6","h-16","flex","justify-center","items-center"],[1,"collapsible-icons"],[1,"collapsible-top-icon"],[1,"collapsible-bottom-icon"],[1,"brand-wrapper"],["href","#",1,"brand","text-center"],[1,"flex","items-center","font-bold","text-emerald-50"],["src","https://i.ibb.co/7K50gbw/Pay-Pikpng.png","alt","Logo",1,"h-16","w-auto","object-contain","hover:border-emerald-400"],[1,"menu-links"],["routerLinkActive","active","ariaCurrentWhenActive","page",1,"menu-item",3,"routerLink"],[1,"bi","bi-columns-gap"],["href","javascript:void(0)","aria-expanded","true",1,"menu-item","sub-menu",3,"click"],[1,"bi","bi-sliders2-vertical"],[1,"sub-menu-item"],["href","#","ariaCurrentWhenActive","page",1,"menu-item"],[1,"bi","bi-headset"],["href","#",1,"menu-item",3,"click"],[1,"bi","bi-box-arrow-right"],["href","javascript:void(0);",1,"menu-item",3,"click"],[1,"bi","bi-caret-left-square"]],template:function(e,a){e&1&&(P(0,de,44,6,"aside",0)(1,pe,16,2,"aside",0),t(2,"div",1)(3,"button",2)(4,"div",3)(5,"div",4),s(6,"div",5)(7,"div",6),o()()()()),e&2&&(w("ngIf",a.isMarchand),p(),w("ngIf",!a.isMarchand))},dependencies:[X,W,K,ee],styles:[`.sidebar{position:sticky;top:0;min-height:100vh;background-image:linear-gradient(to right,var(--tw-gradient-stops));--tw-gradient-from: #022c22 var(--tw-gradient-from-position);--tw-gradient-to: rgb(2 44 34 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to: #047857 var(--tw-gradient-to-position);padding-left:.75rem;padding-right:.75rem;padding-top:1.25rem;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.sidebar[aria-expanded=true]{width:15rem}.sidebar[aria-expanded=false]{width:0px;overflow:hidden;padding:0}.brand-wrapper{display:flex;min-height:2rem;align-items:center;justify-content:space-between}.brand{display:flex;align-items:center;column-gap:.5rem;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}app-sidebar[aria-expanded=false] .brand-wrapper{justify-content:space-evenly}app-sidebar[aria-expanded=false] .brand{width:0px;--tw-scale-x: 0;--tw-scale-y: 0;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.menu-links{display:flex;flex-direction:column;row-gap:.75rem;padding-top:1.25rem;font-weight:500}.menu-item{display:inline-flex;width:100%;align-items:center;column-gap:.5rem;overflow:hidden;border-radius:.25rem;padding:.25rem .5rem;--tw-text-opacity: 1;color:rgb(167 243 208 / var(--tw-text-opacity));transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.menu-item span{font-size:.875rem;line-height:1.25rem}.sidebar[aria-expanded=false] .menu-links .menu-item span{display:none}.menu-item.active{--tw-text-opacity: 1;color:rgb(5 150 105 / var(--tw-text-opacity))}.menu-item:hover{--tw-bg-opacity: 1;background-color:rgb(4 120 87 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(236 253 245 / var(--tw-text-opacity))}.menu-item i:before{display:inline}.sub-menu{position:relative}.sub-menu[aria-expanded=true]{--tw-text-opacity: 1;color:rgb(236 253 245 / var(--tw-text-opacity))}.sub-menu:after{font-family:Bootstrap-Icons;content:"\\f282";position:absolute;font-size:.5rem;right:0;padding:.5rem;transition:all .2s ease-in-out}.sub-menu[aria-expanded=true]:after{transform:rotate(90deg)}.sub-menu[icon-hidden]:after{opacity:0}.sub-menu-item{margin-left:1rem;display:flex;max-height:0px;flex-direction:column;overflow:hidden;border-left-width:1px;--tw-border-opacity: 1;border-color:rgb(5 150 105 / var(--tw-border-opacity));padding-left:.5rem;font-size:.875rem;line-height:1.25rem;transition-property:max-height;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.sub-menu[aria-expanded=true]+.sub-menu-item{max-height:24rem!important}.collapsible-top-icon,.collapsible-bottom-icon{transition-property:all;transition-duration:.1s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.collapsible-btn-container{position:fixed;left:0;top:50%;--tw-translate-x: 15rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}@media (max-width: 1200px){.collapsible-btn-container{position:fixed;left:0;top:50%;--tw-translate-x: 10rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}}.collapsible-top-icon{height:1rem;width:.25rem;--tw-translate-y: .15rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(2 44 34 / var(--tw-bg-opacity))}.collapsible-bottom-icon{height:1rem;width:.25rem;--tw-translate-y: -.15rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(2 44 34 / var(--tw-bg-opacity))}#sidebar-collapse-btn:hover .collapsible-top-icon,#sidebar-collapse-btn:hover .collapsible-bottom-icon{--tw-bg-opacity: 1;background-color:rgb(4 120 87 / var(--tw-bg-opacity))}.sidebar[aria-expanded=false] .collapsible-btn-container{--tw-translate-x: .3rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar[aria-expanded=false] .collapsible-btn-container .collapsible-top-icon{--tw-rotate: -15deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar[aria-expanded=false] .collapsible-btn-container .collapsible-bottom-icon,.sidebar[aria-expanded=true] #sidebar-collapse-btn:hover .collapsible-top-icon{--tw-rotate: 15deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar[aria-expanded=true] #sidebar-collapse-btn:hover .collapsible-bottom-icon{--tw-rotate: -15deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}
`],encapsulation:2});let r=n;return r})();var _e=(()=>{let n=class n{constructor(i,e){this.element=i,this.rendered=e,this.title="event-bud-frontend"}onClick(i){if(!this.element.nativeElement.querySelector(".profile-dropdown").contains(i)){let a=this.element.nativeElement.querySelector(".profile-dropdown-list");this.rendered.setAttribute(a,"aria-expanded","false")}}};n.\u0275fac=function(e){return new(e||n)(c(h),c(I))},n.\u0275cmp=g({type:n,selectors:[["app-marchand"]],hostBindings:function(e,a){e&1&&m("click",function(u){return a.onClick(u.target)})},decls:6,vars:0,consts:[[1,"flex","w-full","items-start","font-sans","bg-slate-100"],["aria-expanded","true",1,"sidebar","shadow-xl"],[1,"flex-1"],[1,"min-h-screen","p-8"]],template:function(e,a){e&1&&(t(0,"div",0),s(1,"app-sidebar",1),t(2,"div",2),s(3,"app-header"),t(4,"main",3),s(5,"router-outlet"),o()()())},dependencies:[N,Z,te]});let r=n;return r})();export{j as a,O as b,T as c,_e as d};
